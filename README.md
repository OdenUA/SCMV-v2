# SCMV v2 ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–∫–æ–≤

Version: v1.0.0 ‚Äî project baseline (start)

Changelog (start): initial baseline commit and README analysis.

–≠—Ç–æ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π (–ª–∏—á–Ω—ã–π) –ø—Ä–æ–µ–∫—Ç ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ GPS-—Ç—Ä–µ–∫–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–µ; README —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, —á—Ç–æ–±—ã –≤—ã –±—ã—Å—Ç—Ä–µ–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–µ.

–§–∞–π–ª—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ (—á–µ—Ä–µ–∑ —Ç–µ–≥–∏ <script> –≤ `index.html`), —Å–±–æ—Ä–æ–∫ –∏ –ø–∞–∫–µ—Ç–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –Ω–µ—Ç ‚Äî –≤—Å—ë –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–ª–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä.

---

–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —ç—Ç–æ–≥–æ README:
- –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π
- –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏

---

## –û–±–∑–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π (—á—Ç–æ —É–º–µ–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - –í `ws.js` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω WebSocket –∫–ª–∏–µ–Ω—Ç, –æ—Ç–ø—Ä–∞–≤–∫–∞/–ø—Ä–∏—ë–º –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–ª–æ–≥–∏–Ω–∞ (localStorage).

- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤
   - –ó–∞–ø—Ä–æ—Å—ã: `Vehicle Track` (—Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Ç—Ä–µ–∫) –∏ `Vehicle Track` —Å `_raw` —Ñ–ª–∞–≥–æ–º (points-only / raw track).
   - –û—Ç—Ä–∏—Å–æ–≤–∫–∞: —Ç—Ä–µ–∫–∏ —Ä–∏—Å—É—é—Ç—Å—è –∫–∞–∫ –ø–æ–ª–∏–≥–æ–Ω—ã/–ø–æ–ª–∏–ª–∏–Ω–∏–∏ –≤ `device_track.js` (—Å–ª–æ–∏ –≤ `trackLayerGroup`).
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (arrow-decorator) —á–µ—Ä–µ–∑ `leaflet-polyline-decorator`.

- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é** ‚ö†Ô∏è **[–í–ê–ñ–ù–û]**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
   - –ö–Ω–æ–ø–∫–∞ "üßπ –û—á–∏—Å—Ç–∏—Ç—å –ø–∞–º—è—Ç—å" –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –ø–æ 10000+ –∑–∞–ø–∏—Å–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—á–∏—Å—Ç–∫—É –ø–∞–º—è—Ç–∏

- –í—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π
   - –í `device_track.js` –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞ –≤—ã—è–≤–ª–µ–Ω–∏—è —Ä–∞–∑—Ä—ã–≤–æ–≤, –±—Ä–æ—Å–∫–æ–≤ –ø–æ–∑–∏—Ü–∏–∏, —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ ¬´–≤–Ω–µ –≥—Ä–∞–Ω–∏—Ü¬ª (out of bounds).
   - –ê–Ω–æ–º–∞–ª–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ –∏ –≤ —Ç–∞–±–ª–∏—Ü—É (–ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å), —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ.

- –°—Ç–∞—Ä—Ç/–°—Ç–æ–ø (Parking / Stops)
   - `stops.js` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç Start/Stop Accumulation –∏ —Ä–∏—Å—É–µ—Ç –º–∞—Ä–∫–µ—Ä—ã —Å—Ç–æ—è–Ω–æ–∫ –≤ `parkingLayerGroup`.
   - –ú–∞—Ä–∫–µ—Ä—ã –∏–º–µ—é—Ç –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∏ –∫–ª–∏–∫–æ–º –ø–æ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ –º–∞—Ä–∫–µ—Ä—É.

- –†—É—á–Ω–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ (route-mode)
   - `route.js` —Ä–µ–∞–ª–∏–∑—É–µ—Ç "–º–æ–Ω–æ–ø–æ–ª—å–Ω—ã–π" —Ä–µ–∂–∏–º –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞: –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ –∫–ª–∏–∫–∏ –ø–æ –∫–∞—Ä—Ç–µ, —Ç—Ä–µ–∫–∞–º –∏ –º–∞—Ä–∫–µ—Ä–∞–º –¥–æ–±–∞–≤–ª—è—é—Ç —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞ (–Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –¥–æ 25 —Ç–æ—á–µ–∫).
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ –¥–æ—Ä–æ–≥–∞–º —á–µ—Ä–µ–∑ OSRM (`buildRoadRoute`) –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ Google Maps (`buildGoogleMapsRouteManual`).
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –∫–Ω–æ–ø–∫–∞-–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å (–ª–µ–≤—ã–π –≤–µ—Ä—Ö), —Å–±—Ä–æ—Å –º–∞—Ä—à—Ä—É—Ç–∞, —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–∞—Ä—à—Ä—É—Ç–µ.

- –¢–∞–±–ª–∏—Ü—ã –∏ –æ—Ç—á—ë—Ç—ã
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—á–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π: –∞–Ω–æ–º–∞–ª–∏–∏, Device Log, Device Alarm, Full Device Track –∏ –æ—Ç—á—ë—Ç—ã –ø–æ –ø—Ä–æ–±–µ–≥–∞–º.
   - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ `populateTable` –≤ `utils.js` –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü.

- –£–¥–æ–±—Å—Ç–≤–∞ UI
   - –ü–ª–∞–≤–∞—é—â–∞—è –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–≤—ã–±–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –¥–∞—Ç—ã), –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏, drag-to-resize –∫–∞—Ä—Ç—ã, toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏.

---

## –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∏—Ö —Ä–æ–ª–∏

- `index.html` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ CDN-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Leaflet, polyline decorator), –æ–±—ä—è–≤–ª–µ–Ω–∏–µ DOM-–ø–∞–Ω–µ–ª–µ–π.
- `globals.js` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Å—Å—ã–ª–∫–∏ –Ω–∞ DOM-—ç–ª–µ–º–µ–Ω—Ç—ã –∏ –Ω–∞—á–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–ª–æ—ë–≤ –∫–∞—Ä—Ç—ã).
- `map.js` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Leaflet-–∫–∞—Ä—Ç—ã, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã (route control, tracks/parking toggle), resize handle –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ UI-—ç–ª–µ–º–µ–Ω—Ç—ã.
- `route.js` ‚Äî —Ä–µ–∂–∏–º —Ä—É—á–Ω–æ–≥–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ—á–µ–∫, —Å–±–æ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞ –ø–æ OSRM, —Å–±—Ä–æ—Å –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–∞—Ä—à—Ä—É—Ç–µ.
- `device_track.js` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–µ–∫–æ–≤: –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–æ–ª–∏–ª–∏–Ω–∏–π, –≤—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π, –∫–ª–∏–∫–∏ –ø–æ —Ç—Ä–µ–∫–∞–º (–ø–æ–∫–∞–∑ –±–ª–∏–∂–∞–π—à–µ–π —Ç–æ—á–∫–∏) –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç–∞—Ä—Ç/—Ñ–∏–Ω–∏—à –º–∞—Ä–∫–µ—Ä–æ–≤.
- `stops.js` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ Start/Stop –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å—Ç–æ—è–Ω–æ–∫ (–º–∞—Ä–∫–µ—Ä + popup + –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π).
- `mileage.js` ‚Äî –ª–æ–≥–∏–∫–∞ –æ—Ç—á—ë—Ç–æ–≤ –ø–æ –ø—Ä–æ–±–µ–≥–∞–º (–∑–∞–ø—Ä–æ—Å—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤). (—Å–º. —Ñ–∞–π–ª –¥–ª—è –¥–µ—Ç–∞–ª–µ–π)
- `device_log.js` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (UI —Ç–∞–±–ª–∏—Ü—ã –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏).
- `ws.js` ‚Äî —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –º–æ–¥—É–ª—å WebSocket: –æ—Ç–ø—Ä–∞–≤–∫–∞/–ø—Ä–∏—ë–º –∫–æ–º–∞–Ω–¥, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º.
- `ui.js` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ UI (–∫–Ω–æ–ø–∫–∏, –¥–∏–∞–ª–æ–≥–∏, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/—Å–±—Ä–æ—Å—ã, –ø–∞–Ω–µ–ª–∏, —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫).
- `utils.js` ‚Äî —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏, –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–Ω–¥–µ—Ä–µ—Ä—ã —Ç–∞–±–ª–∏—Ü –∏ –ø—Ä.
- `memory.js` ‚Äî **[–ù–û–í–û–ï]** —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö.
- `style.css` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –Ω–∞–±–æ—Ä —Å—Ç–∏–ª–µ–π.

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

1. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

    git clone https://github.com/OdenUA/SCMV-v2.git

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –ª–æ–∫–∞–ª—å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

    PowerShell (Windows):
    ```powershell
    cd "d:\scmv\SCMV v2"
    python -m http.server 8000
    # –∏–ª–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å npm): npx http-server -p 8000
    ```

3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000 –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WebSocket –∫ –∞–¥—Ä–µ—Å—É `wsUrl` (–æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ `globals.js`). –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ WebSocket —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –≤—ã —Å–º–æ–∂–µ—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤, —Ä–µ–∂–∏–º –º–∞—Ä—à—Ä—É—Ç–∞ –∏ UI –±–µ–∑ WS.

---

## –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö

- WS ‚Üí `ws.js`
   - –í—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ `ws.js:onmessage`, –≥–¥–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç `data.name` –æ–Ω–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (vehicle lists, mileage, track, startstop –∏ —Ç.–¥.).

- –¢—Ä–µ–∫–∏ ‚Üí `device_track.js`
   - –ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç–≤–µ—Ç `Vehicle Track`, `ws.js` –≤—ã–∑—ã–≤–∞–µ—Ç `processDeviceTrack(response)`.
   - `processDeviceTrack` —Ä–∞–∑–±–∏–≤–∞–µ—Ç —Ç–æ—á–∫–∏ –Ω–∞ —Å–µ–≥–º–µ–Ω—Ç—ã, —Ä–∏—Å—É–µ—Ç polylines, –≤—ã—á–∏—Å–ª—è–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏ –∏ —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É –∞–Ω–æ–º–∞–ª–∏–π.

- –°—Ç–æ—è–Ω–∫–∏ ‚Üí `stops.js`
   - –°–µ—Ä–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç Startstop Accumulation –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `startstopStops`, –∞ –∑–∞—Ç–µ–º `rebuildStopMarkers` —Ä–∏—Å—É–µ—Ç –º–∞—Ä–∫–µ—Ä—ã —Å—Ç–æ—è–Ω–æ–∫.

- –†–µ–∂–∏–º –º–∞—Ä—à—Ä—É—Ç–∞ ‚Üí `route.js`
   - –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è ¬´–º–æ–Ω–æ–ø–æ–ª—å–Ω—ã–π¬ª –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–æ–≤ –∫–∞—Ä—Ç—ã (`onRouteMapClick`). –í–æ –≤—Ä–µ–º—è —Ä–µ–∂–∏–º–∞ –ø–æ–¥–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ø–∞–ø—ã –∏ –∫–ª–∏–∫–∏ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞. –ü–æ—Å–ª–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—á–µ–∫ –º–æ–∂–Ω–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –ø–æ –¥–æ—Ä–æ–≥–∞–º —á–µ—Ä–µ–∑ OSRM.

---
